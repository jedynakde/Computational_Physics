\begin{Verbatim}[commandchars=\\\{\}]
    \PYG{c+c1}{//swapping the particles trying to enter and leave to have the effect of a wall}
    \PYG{n}{n}\PYG{p}{[(((}\PYG{n}{vx}\PYG{o}{+}\PYG{n}{x}\PYG{p}{)}\PYG{o}{\PYGZpc{}}\PYG{n}{XDIM}\PYG{p}{)}\PYG{o}{+}\PYG{n}{XDIM}\PYG{p}{)}\PYG{o}{\PYGZpc{}}\PYG{n}{XDIM}\PYG{p}{][((}\PYG{n}{y}\PYG{o}{+}\PYG{n}{vy}\PYG{p}{)}\PYG{o}{\PYGZpc{}}\PYG{n}{YDIM}\PYG{o}{+}\PYG{n}{YDIM}\PYG{p}{)}\PYG{o}{\PYGZpc{}}\PYG{n}{YDIM}\PYG{p}{][}\PYG{n}{v}\PYG{p}{]} \PYG{o}{=} \PYG{n}{n}\PYG{p}{[(((}\PYG{n}{x}\PYG{p}{)}\PYG{o}{\PYGZpc{}}\PYG{n}{XDIM}\PYG{p}{)}\PYG{o}{+}\PYG{n}{XDIM}\PYG{p}{)}\PYG{o}{\PYGZpc{}}\PYG{n}{XDIM}\PYG{p}{][((}\PYG{n}{y}\PYG{p}{)}\PYG{o}{\PYGZpc{}}\PYG{n}{YDIM}\PYG{o}{+}\PYG{n}{YDIM}\PYG{p}{)}\PYG{o}{\PYGZpc{}}\PYG{n}{YDIM}\PYG{p}{][}\PYG{l+m+mi}{8}\PYG{o}{\PYGZhy{}}\PYG{n}{v}\PYG{p}{]} \PYG{o}{\PYGZhy{}} \PYG{n}{flow}\PYG{p}{;}
    \PYG{n}{n}\PYG{p}{[(((}\PYG{n}{x}\PYG{p}{)}\PYG{o}{\PYGZpc{}}\PYG{n}{XDIM}\PYG{p}{)}\PYG{o}{+}\PYG{n}{XDIM}\PYG{p}{)}\PYG{o}{\PYGZpc{}}\PYG{n}{XDIM}\PYG{p}{][((}\PYG{n}{y}\PYG{p}{)}\PYG{o}{\PYGZpc{}}\PYG{n}{YDIM}\PYG{o}{+}\PYG{n}{YDIM}\PYG{p}{)}\PYG{o}{\PYGZpc{}}\PYG{n}{YDIM}\PYG{p}{][}\PYG{l+m+mi}{8}\PYG{o}{\PYGZhy{}}\PYG{n}{v}\PYG{p}{]} \PYG{o}{=} \PYG{n}{tmp} \PYG{o}{+} \PYG{n}{flow}\PYG{p}{;}
\end{Verbatim}
